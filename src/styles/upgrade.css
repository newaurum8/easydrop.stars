/* src/styles/upgrade.css */

.upgrade-content {
    display: flex; flex-direction: column; align-items: center; padding: 24px 0; gap: 24px;
}

.upgrade-wheel-container {
    display: flex; justify-content: space-between; align-items: center; width: 100%; padding: 0 10px; box-sizing: border-box;
}
.stat-display { display: flex; flex-direction: column; align-items: center; gap: 8px; }
.stat-label { font-size: 14px; color: #8a99a8; }
.stat-value { font-size: 22px; font-weight: 700; }

/* Колесо */
.wheel {
    position: relative; width: 160px; height: 160px; display: flex; justify-content: center; align-items: center;
    border-radius: 50%; border: 3px solid #3a4552; padding: 3px; box-sizing: border-box;
    background: conic-gradient(#00aaff 0%, #00aaff var(--chance, 0%), #2c3641 var(--chance, 0%), #2c3641 100%);
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}
.wheel-outer-ring {
    width: 100%; height: 100%; border-radius: 50%; background-color: #2c3641;
    display: flex; justify-content: center; align-items: center; padding: 3px; box-sizing: border-box;
}
.wheel-inner-ring {
    width: 100%; height: 100%; border-radius: 50%; border: 6px solid #212a31;
    display: flex; justify-content: center; align-items: center; box-sizing: border-box; background-color: #212a31;
    position: relative;
    overflow: hidden;
}
.wheel-indicator-container {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; transition: transform 4s cubic-bezier(0.25, 1, 0.5, 1);
}
.wheel-indicator-arrow {
    position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0;
    border-left: 10px solid transparent; border-right: 10px solid transparent; border-top: 15px solid #ffc107;
    filter: drop-shadow(0 -2px 4px rgba(0,0,0,0.5));
}

/* Изображение предмета */
.wheel-item {
    width: 55%; height: auto; 
    transition: opacity 0.3s ease, transform 0.3s ease; 
    opacity: 1; transform: scale(1);
    position: relative; 
    z-index: 2;
}

.wheel-item.is-fading { opacity: 0; transform: scale(0.8); }

/* --- АНИМАЦИЯ ПОБЕДЫ (СИНИЙ) --- */
.wheel-item.roll-success {
    animation: simpleSuccess 0.6s ease-out forwards;
}

@keyframes simpleSuccess {
    0% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(0,0,0,0)); }
    50% { transform: scale(1.3); filter: drop-shadow(0 0 25px #00e5ff) brightness(1.2); }
    100% { transform: scale(1.2); filter: drop-shadow(0 0 15px #00e5ff) brightness(1.1); }
}

/* --- АНИМАЦИЯ ПРОИГРЫША (ИСЧЕЗНОВЕНИЕ) --- */
.wheel-item.roll-fail {
    /* Убрали grayscale, добавили исчезновение */
    animation: disappearFail 0.6s ease-in-out forwards;
}

@keyframes disappearFail {
    0% { 
        transform: scale(1); 
        opacity: 1; 
    }
    20% { 
        transform: scale(1.1); /* Небольшой "вздох" перед исчезновением */
        opacity: 1; 
    }
    100% { 
        transform: scale(0); /* Сжатие в ноль */
        opacity: 0;          /* Полная прозрачность */
    }
}


/* =========================================
   ФОНОВЫЕ ЭФФЕКТЫ (RESULT FX)
   ========================================= */

.result-effect {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 1;
}

/* ВСПЫШКА */
.effect-flash {
    position: absolute; top: 0; left: 0; width: 100%; height: 100%;
    border-radius: 50%;
    opacity: 0;
    animation: flashEffect 0.5s ease-out forwards;
}

/* ВОЛНА */
.effect-wave {
    position: absolute; top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.5);
    width: 100%; height: 100%;
    border-radius: 50%;
    opacity: 0;
    border: 2px solid transparent;
    animation: waveEffect 0.8s ease-out forwards;
}

/* --- ЦВЕТА ЭФФЕКТОВ --- */

/* ПОБЕДА: СИНИЙ */
.result-effect.success .effect-flash {
    background: radial-gradient(circle, rgba(0, 229, 255, 0.8) 0%, transparent 70%);
}
.result-effect.success .effect-wave {
    border-color: #00e5ff;
    box-shadow: 0 0 20px #00e5ff, inset 0 0 20px #00e5ff;
}

/* ПРОИГРЫШ: КРАСНЫЙ */
.result-effect.fail .effect-flash {
    /* Красная вспышка остается на фоне */
    background: radial-gradient(circle, rgba(255, 23, 68, 0.6) 0%, transparent 70%);
}
.result-effect.fail .effect-wave {
    border-color: #ff1744;
    box-shadow: 0 0 15px #ff1744;
}

/* --- KEYFRAMES --- */

@keyframes flashEffect {
    0% { opacity: 0; transform: scale(0.8); }
    20% { opacity: 1; transform: scale(1.1); }
    100% { opacity: 0; transform: scale(1.2); }
}

@keyframes waveEffect {
    0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); border-width: 10px; }
    20% { opacity: 1; }
    100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); border-width: 0px; }
}


/* --- ИНВЕНТАРЬ --- */
.selection-area { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; width: 100%; }
.selection-box {
    background-color: #2c3641; border: 2px solid #2c3641; border-radius: 16px; height: 140px;
    display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 8px;
    font-weight: 500; cursor: pointer; transition: border-color 0.2s ease;
}
.selection-box.active-border { border-color: #00aaff; }
.selection-box img { width: 60px; height: 60px; object-fit: contain; }
.plus-icon { font-size: 32px; color: #8a99a8; }

.inventory-tabs {
    display: flex; background-color: #2c3641; border-radius: 20px; padding: 4px; width: 100%; box-sizing: border-box;
}
.tab-btn {
    flex: 1; padding: 8px 16px; border: none; background-color: transparent; color: #8a99a8;
    border-radius: 16px; font-weight: 500; cursor: pointer; transition: all 0.2s ease;
}
.tab-btn.active { background-color: #3a4552; color: #e0e0e0; }

.inventory-content { width: 100%; }
.tab-content { display: none; }
.tab-content.active { display: block; }

.upgrade-content .inventory-grid {
    max-height: 250px; overflow-y: auto; padding: 10px; background-color: #212a31; border-radius: 8px;
}
.upgrade-content .inventory-item { cursor: pointer; border: 2px solid transparent; transition: border-color 0.2s ease; }
.upgrade-content .inventory-item.active-border, .upgrade-content .inventory-item:hover { border-color: #00aaff; }
